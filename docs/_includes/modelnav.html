<ul class="nav flex-column">
  {%- if model.nav_items -%}
    {%- if page.model == model.id -%}
      {%- capture pageInModel -%}{%- include isPageInHierarchy.html siblings=model.nav_items toFind=page.id -%}{%- endcapture -%}
    {%- else -%}
      {%- assign pageInModel = "0" -%}
    {%- endif -%}
    {%- if pageInModel == "1" -%}
      {%- assign navlinkClass = "active" -%}
      {%- assign version = pageModelVersion | default: '' -%}
    {%- else -%}
      {%- assign navlinkClass = "" -%}
      {%- assign version = model.default_version -%}
    {%- endif -%}
    {%- assign default_item = model.nav_items | where: 'id', model.default_navitem -%}
    {%- capture default_path -%}{%- include getNavItemPath.html item=default_item -%}{%- endcapture -%}
    {%- assign default_path = site.url | append: '/' | append: default_path -%}
    {%- assign nav_items = model.nav_items -%}
    {%- assign basepath = model.basepath | append: '/' | append: version -%}
  {%- else -%}
    {%- assign nav_items = [] -%}
    {%- assign default_path = '#' -%}
    {%- assign navlinkClass = "" -%}
    {%- assign basepath = '' | append: version -%}
  {%- endif -%}
  {%- for item in nav_items -%}
    <li class="nav-item">
    {%- if item.heading -%}
      <span class="header">{{ item.title }}</span>
    {%- else -%}
      {%- capture path %}{% include getNavItemPath.html item=item %}{%- endcapture -%}
      <a class="nav-link" href="{{ site.url }}/{{ basepath}}/{{ path }}">{{ item.title }}</a>
    {%- endif -%}
    {%- if item.subitems -%}
      {%- for subitem in item.subitems -%}
        {%- capture path %}{% include getNavItemPath.html item=subitem %}{%- endcapture -%}
        <a class="nav-link sublevel" href="{{ site.url }}/{{ basepath}}/{{ item.id }}/{{ path }}">{{ subitem.title }}</a></li>
      {%- endfor -%}
    {%- endif -%}
    </li>
  {%- endfor -%}
</ul>
