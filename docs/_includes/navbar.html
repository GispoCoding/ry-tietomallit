<nav class="navbar sticky-top navbar-expand-lg navbar-dark" style="background-color:rgb(41, 55, 69);">
  <div class="container-fluid">
    <a class="navbar-brand short" href="{{ site.home }}">RY-tietomallit</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
      {%- for menu in site.data.topnavigation -%}
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle {{ navlinkClass }}" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">{{ menu.title }}</a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
          {%- for item in menu.nav_items -%}
            {%- if item.kind == "model" -%}
              {%- assign navdata = site.data.models[item.id] -%}
              {%- assign default_version = navdata.versions | where_exp: "version", "version.default" | first -%}
              {%- unless default_version -%}
                {%- assign default_version = navdata.versions | first -%}
              {%- endunless -%}   
            {%- elsif item.kind == "project" -%}
              {%- assign navdata = site.data.projects[item.id] -%}
            {%- endif -%}
            {%- if navdata -%}
              {%- assign basepath = navdata.basepath -%}
              {%- assign default_item = navdata.nav_items | where_exp: "item", "item.default" | first -%}
              {%- unless default_item -%}
                {%- assign default_item = navdata.nav_items | first -%}
              {%- endunless -%}
              {%- capture default_path -%}{%- include getNavItemPath.html item=default_item -%}{%- endcapture -%}
              {%- if item.kind == "model" -%}
                {%- assign path = basepath | append: '/' | append: default_version.path | append: '/' | append: default_path -%}
              {%- elsif item.kind == "project" -%}
                {%- assign path = 'projektit/' | append: basepath | append: '/' | append: default_path -%}
              {%- endif -%}
              <li>
                <a class="dropdown-item" href="{{ site.url }}/{{ path }}">{{ navdata.title }}</a>
              </li>
            {%- endif -%}
          {%- endfor -%}
          </ul>
        </li>
      {%- endfor -%}
      </ul>
      <div class="d-flex">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item">
          <a class="nav-link" href="{{ site.github.repository_url }}"><i class="fab fa-github"></i>&nbsp;GitHub</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://ym.fi/ryhti">Ryhti-hanke</a>
        </li>
        </ul>
      </div>
    </div>
  </div>
</nav>
